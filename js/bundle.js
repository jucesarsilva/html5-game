function Background(t,i,n,e,s){function h(t){c=t}function u(t){r=t}function o(t){d=t}var c=0,r=0,f=0,g=0,a=3,d=!1,m=i,p=n,w=e,H=s;for(this.name=t,this.sprite=[],this.image,m;m<p;m++)this.image=new Image,this.image.src=w+m+"."+H,this.image.onload=function(){h(this.width),u(this.height),o(!0)},this.sprite.push(this.image);this.getWidth=function(){return c},this.setWidth=function(t){c=t},this.getHeight=function(){return r},this.setHeight=function(t){r=t},this.getReady=function(){return d},this.getX=function(){return f},this.setX=function(t){f=t},this.getY=function(){return g},this.setY=function(t){g=t},this.getSpeed=function(){return a},this.setSpeed=function(t){a=t}}
function Enemy(t,i,n,e,h){function s(t){a=t}function o(t){g=t}function u(t){w=t}var c=window.document.getElementById("canvas"),r=c.width,f=c.height,a=0,g=0,d=0,m=0,p=4,w=!1,y=i,l=n,v=e,E=h;for(this.name=t,this.sprite=[],this.image,y;y<l;y++)this.image=new Image,this.image.src=v+y+"."+E,this.image.onload=function(){s(this.width),o(this.height),u(!0)},this.sprite.push(this.image);this.getWidth=function(){return a},this.setWidth=function(t){a=t},this.getHeight=function(){return g},this.setHeight=function(t){g=t},this.getReady=function(){return w},this.getX=function(){return d},this.setX=function(t){d=t},this.getY=function(){return m},this.setY=function(t){m=t},this.getSpeed=function(){return p},this.setSpeed=function(t){p=t},this.randomPosition=function(t,i,n,e){d=r+a+500*Math.random(),m=g+Math.random()*(f-g)}}
function Explosion(t,i,n,e,h){function s(t){f=t}function u(t){c=t}function o(t){a=t}var f=0,c=0,r=0,g=0,a=!1,m=i,d=n,l=e,p=h,w=[],y=!0,A=0;for(this.name=t,this.image,m;m<d;m++)this.image=new Image,this.image.src=l+m+"."+p,this.image.onload=function(){s(this.width),u(this.height),o(!0)},w.push(this.image);this.getWidth=function(){return f},this.setWidth=function(t){f=t},this.getHeight=function(){return c},this.setHeight=function(t){c=t},this.getReady=function(){return a},this.getX=function(){return r},this.setX=function(t){r=t},this.getY=function(){return g},this.setY=function(t){g=t},this.isAnimation=function(){return A>w.length-2&&(y=!0,A=0),y},this.play=function(t,i){r=t,g=i,A=0,y=!1},this.Animation=function(){if(A++,!y)return w[A]}}
function update(){if(keyboard.getKeyLeft()?player.vx-=player.increment:keyboard.getKeyRight()?player.vx+=player.increment:player.vx*=player.constFrenagem,keyboard.getKeyUp()?player.vy-=player.increment:keyboard.getKeyDown()?player.vy+=player.increment:player.vy*=player.constFrenagem,player.timerShot++,player.timerShot>player.shotInterval&&(player.fire=!0),keyboard.getKeySpace()&&!player.isRespaw()&&player.fire){var e=new Shot("shot"+arrayObjPlayerShot.length,0,1,"images/shotPlayer/shot_","png");r=arrayObjPlayerShot.length,arrayObjPlayerShot.push(e),arrayObjPlayerShot[r].setX(player.getX()+player.getWidth()/2),arrayObjPlayerShot[r].setY(player.getY()+player.getHeight()/2.5),arrayObjPlayerShot[r].setSpeed(player.getSpeed()/4+7),player.fire=!1,player.timerShot=0,shots++;var a=new Audio("sounds/shoot.mp3");shotPlayerObjSound.push(a);var r=shotPlayerObjSound.length-1;shotPlayerObjSound[r].play()}if(player.vy>player.VelocMaxDown?player.vy=player.VelocMaxDown:player.vy<player.VelocMaxUp&&(player.vy=player.VelocMaxUp),player.vx>player.VelocMaxRigth?player.vx=player.VelocMaxRigth:player.vx<player.VelocMaxLeft&&(player.vx=player.VelocMaxLeft),parseInt(player.getY())>0&&parseInt(player.getY())<canvas.height-player.getHeight()&&parseInt(player.getX())>0&&parseInt(player.getX())<canvas.width-player.getWidth()?(player.lastPosX=parseInt(player.getX()),player.lastPosY=parseInt(player.getY()),player.setX(player.getX()+player.vx),player.setY(player.getY()+player.vy)):(player.vy=0,player.vx=0,player.setX(player.lastPosX),player.setY(player.lastPosY)),arrayObjPlayerShot.length>0)for(var t=0;t<arrayObjPlayerShot.length;t++)arrayObjPlayerShot[t].setX(arrayObjPlayerShot[t].getX()+arrayObjPlayerShot[t].getSpeed()),arrayObjPlayerShot[t].getX()>canvas.width&&(arrayObjPlayerShot.shift(),shotPlayerObjSound.shift());for(var n=0;n<qtdMaxEnemies;n++)arrayObjEnemies[n].setX(arrayObjEnemies[n].getX()-arrayObjEnemies[n].getSpeed()),arrayObjEnemies[n].getX()<-100&&arrayObjEnemies[n].randomPosition(),0==arrayObjShotEnemies[n].fired?(arrayObjShotEnemies[n].setX(arrayObjEnemies[n].getX()),arrayObjShotEnemies[n].setY(arrayObjEnemies[n].getY()+arrayObjEnemies[n].getHeight()/2.5),arrayObjShotEnemies[n].getX()<arrayObjShotEnemies[n].fireMoment&&arrayObjShotEnemies[n].getX()>arrayObjShotEnemies[n].fireMoment-100&&(arrayObjShotEnemies[n].fired=!0)):(arrayObjShotEnemies[n].setX(arrayObjShotEnemies[n].getX()-arrayObjShotEnemies[n].getSpeed()),arrayObjShotEnemies[n].getX()<-70&&(arrayObjShotEnemies[n].fired=!1,arrayObjShotEnemies[n].fireMoment=parseInt(200+850*Math.random())));bg_0.setX(bg_0.getX()-bg_0.getSpeed()),bg_0.getX()<=-canvas.width&&bg_0.setX(canvas.width),bg_1.setX(bg_1.getX()-bg_1.getSpeed()),bg_1.getX()<=-canvas.width&&bg_1.setX(canvas.width)}function checkAllColision(){if(!player.isRespaw())for(var e=0;e<arrayObjEnemies.length;e++)isCollision(player,arrayObjEnemies[e])?(arrayExplosionEnemies[e].play(arrayObjEnemies[e].getX(),arrayObjEnemies[e].getY()),arrayObjEnemies[e].randomPosition(),deads++,explosionEnemiesObj[e].play(),player.play()):isCollision(player,arrayObjShotEnemies[e])&&(arrayObjShotEnemies[e].setX(-100),deads++,player.play());if(arrayObjPlayerShot.length>0)for(var a=0;a<arrayObjPlayerShot.length;a++)for(var r=0;r<arrayObjEnemies.length;r++)isCollision(arrayObjPlayerShot[a],arrayObjEnemies[r])?(arrayExplosionEnemies[r].play(arrayObjEnemies[r].getX(),arrayObjEnemies[r].getY()),arrayObjEnemies[r].setX(-100),arrayObjPlayerShot[a].setX(2e3),kills++,explosionEnemiesObj[r].play()):isCollision(arrayObjPlayerShot[a],arrayObjShotEnemies[r])&&(player.isRespaw()||(arrayObjShotEnemies[r].setX(-100),arrayObjPlayerShot[a].setX(2e3),kills++))}function render(){if(ctx.drawImage(bg_0.sprite[0],bg_0.getX(),bg_0.getY()),ctx.drawImage(bg_1.sprite[0],bg_1.getX(),bg_1.getY()),player.isRespaw?player.getTimerRespaw()%3==0?ctx.drawImage(player.sprite[0],player.getX(),player.getY()):ctx.drawImage(player.sprite[1],player.getX(),player.getY()):ctx.drawImage(player.sprite[0],player.getX(),player.getY()),arrayObjPlayerShot.length>0)for(var e=0;e<arrayObjPlayerShot.length;e++)ctx.drawImage(arrayObjPlayerShot[e].sprite[0],arrayObjPlayerShot[e].getX(),arrayObjPlayerShot[e].getY());for(var a=0;a<qtdMaxEnemies;a++)ctx.drawImage(arrayObjShotEnemies[a].sprite[0],arrayObjShotEnemies[a].getX(),arrayObjShotEnemies[a].getY()),ctx.drawImage(arrayObjEnemies[a].sprite[0],arrayObjEnemies[a].getX(),arrayObjEnemies[a].getY()),arrayExplosionEnemies[a].isAnimation()||ctx.drawImage(arrayExplosionEnemies[a].Animation(),arrayExplosionEnemies[a].getX(),arrayExplosionEnemies[a].getY());ctx.drawImage(bg_0.sprite[1],bg_0.getX()+1,bg_0.getY()),ctx.drawImage(bg_1.sprite[1],bg_1.getX()+1,bg_1.getY()),ctx.fillStyle="rgb(100, 250, 250)",ctx.font="24px Helvetica",ctx.textAlign="left",ctx.textBaseline="top",ctx.fillText("D: "+deads,10,12),ctx.fillStyle="rgb(100, 250, 250)",ctx.font="24px Helvetica",ctx.textAlign="left",ctx.textBaseline="top",ctx.fillText("K: "+kills,100,12),ctx.fillStyle="rgb(100, 250, 250)",ctx.font="24px Helvetica",ctx.textAlign="left",ctx.textBaseline="top",ctx.fillText("Shots: "+shots,200,12),ctx.fillStyle="rgb(100, 250, 250)",ctx.font="24px Helvetica",ctx.textAlign="left",ctx.textBaseline="top",ctx.fillText("player.x: "+parseInt(player.getX())+" player.y: "+parseInt(player.getY()),600,12)}function isCollision(e,a){var r=!1;return e.getX()<=a.getX()+a.getWidth()&&a.getX()<=e.getX()+e.getWidth()&&e.getY()<=a.getY()+a.getHeight()&&a.getY()<=e.getY()+e.getHeight()&&(r=!0),r}function main(){ctx.clearRect(0,0,canvas.width,canvas.height),requestAnimationFrame(main),player.getReady()&&enemy.getReady()&&(update(),checkAllColision(),render())}function initGame(){player.setX(canvas.width/2),player.setY(canvas.height/2),player.lastPosX=player.getX(),player.lastPosY=player.getY();for(var e=0;e<qtdMaxEnemies;e++)arrayObjEnemies[e].randomPosition()}var canvas=window.document.getElementById("canvas"),ctx=canvas.getContext("2d");window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,a){window.setTimeout(e,1e3/60)}}();var theme=new Audio("sounds/starcraft.mp3");theme.loop=!0,theme.play();var bg_0=new Background("bg_0",0,2,"images/bg/background_","png"),bg_1=new Background("bg_1",0,2,"images/bg/background_","png");bg_0.setX(0),bg_0.setY(0),bg_1.setX(900),bg_1.setY(0);for(var player=new Player("player",0,2,"images/playerSprites/player_","png"),arrayObjPlayerShot=[],shotPlayerObjSound=[],arrayObjEnemies=[],arrayObjShotEnemies=[],arrayExplosionEnemies=[],explosionEnemiesObj=[],qtdMaxEnemies=5,n=0;n<qtdMaxEnemies;n++){enemy=new Enemy("enemy_"+n,0,1,"images/enemiesImage/enemy_","png"),arrayObjEnemies.push(enemy);var shotEnemy=new Shot("shot"+arrayObjShotEnemies.length,0,1,"images/shotEnemy/shot_","png");shotEnemy.fireMoment=parseInt(200+850*Math.random()),arrayObjShotEnemies.push(shotEnemy);var explosion=new Explosion("explosion"+arrayExplosionEnemies.length,0,32,"images/explosions/exp_","png");arrayExplosionEnemies.push(explosion);var explosionEnemies=new Audio("sounds/explosion.mp3");explosionEnemiesObj.push(explosionEnemies)}var keyboard=new KeyBoard,kills=0,deads=0,shots=0;initGame(),main();
function KeyBoard(){function n(){requestAnimationFrame(n),38 in u?o=!0:40 in u?i=!0:(i=!1,o=!1),37 in u?e=!0:39 in u?t=!0:(e=!1,t=!1),r=32 in u}var e=!1,t=!1,i=!1,o=!1,r=!1,u={};window.addEventListener("keydown",function(n){u[n.keyCode]=!0},!1),window.addEventListener("keyup",function(n){delete u[n.keyCode]},!1),this.getKeyUp=function(){return o},this.getKeyDown=function(){return i},this.getKeyLeft=function(){return e},this.getKeyRight=function(){return t},this.getKeySpace=function(){return r},n()}
function Pessoa(){function k(){t=50,teste="privado"}this.nome="fulano sicrano";var t=80;teste="valor",this.verificar=function(){teste="publico",this.nome="kkkkkkkkkkkkkkkkkkkk",t=1e3},this.verificar(),alert(teste),k(),alert(teste)}
function Player(t,i,n,s,e){function h(t){u=t}function o(t){c=t}function r(t){m=t}var u=0,c=0,a=0,f=0,g=5,m=!1,l=!1,p=0,d=i,w=n,x=s,v=e;for(this.name=t,this.shotInterval=20,this.timerShot=0,this.fire=!0,this.increment=.5,this.lastPosX=0,this.lastPosY=0,this.vy=0,this.vx=0,this.VelocMaxDown=g,this.VelocMaxUp=-g,this.VelocMaxRigth=g,this.VelocMaxLeft=-g,this.constFrenagem=.96,this.sprite=[],this.image,d;d<w;d++)this.image=new Image,this.image.src=x+d+"."+v,this.image.onload=function(){h(this.width),o(this.height),r(!0)},this.sprite.push(this.image);this.getWidth=function(){return u},this.setWidth=function(t){u=t},this.getHeight=function(){return c},this.setHeight=function(t){c=t},this.getReady=function(){return m},this.getX=function(){return a},this.setX=function(t){a=t},this.getY=function(){return f},this.setY=function(t){f=t},this.getSpeed=function(){return g},this.setSpeed=function(t){g=t},this.getTimerRespaw=function(){return p},this.isRespaw=function(){return l&&(p++,p>300&&(l=!1,p=0)),l},this.play=function(){l=!0}}
function Shot(t,i,n,e,h){function s(t){f=t}function u(t){r=t}function o(t){d=t}var f=0,r=0,c=0,g=0,a=7,d=!1,m=i,p=n,S=e,w=h;for(this.name=t,this.fired=!1,this.fireMoment=0,this.sprite=[],this.image,m;m<p;m++)this.image=new Image,this.image.src=S+m+"."+w,this.image.onload=function(){s(this.width),u(this.height),o(!0)},this.sprite.push(this.image);this.getWidth=function(){return f},this.setWidth=function(t){f=t},this.getHeight=function(){return r},this.setHeight=function(t){r=t},this.getReady=function(){return d},this.getX=function(){return c},this.setX=function(t){c=t},this.getY=function(){return g},this.setY=function(t){g=t},this.getSpeed=function(){return a},this.setSpeed=function(t){a=t}}